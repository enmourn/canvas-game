var O=(s,t,i)=>{if(!t.has(s))throw TypeError("Cannot "+i)};var a=(s,t,i)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,i)};var n=(s,t,i)=>(O(s,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();var v,S,b,A,$,X,d,y,p,E;class T{constructor(){a(this,v);a(this,b);a(this,$);a(this,d);a(this,p);this.size=80,this.margin=5,this.color="hsla(0, 70%, 70%, 0.5)",this.joystick=n(this,v,S).call(this),this.stick=n(this,b,A).call(this),this.hold=!1,this.x=0,this.y=0,n(this,$,X).call(this)}}v=new WeakSet,S=function(){const t=document.createElement("div");return t.style.backgroundColor=this.color,t.style.position="absolute",t.style.left=`${this.margin}px`,t.style.top=`${innerHeight-this.size-this.margin}px`,t.style.width=`${this.size}px`,t.style.height=`${this.size}px`,t.style.borderRadius="100%",document.body.appendChild(t),t},b=new WeakSet,A=function(){const t=document.createElement("div");return t.style.backgroundColor=this.color,t.style.position="absolute",t.style.left=`${this.size/4}px`,t.style.top=`${this.size/4}px`,t.style.width=`${this.size/2}px`,t.style.height=`${this.size/2}px`,t.style.borderRadius="100%",this.joystick.appendChild(t),t},$=new WeakSet,X=function(){this.joystick.addEventListener("mousedown",t=>{this.hold=!0,n(this,d,y).call(this,t.x,t.y)}),this.joystick.addEventListener("touchstart",t=>{this.hold=!0,n(this,d,y).call(this,t.touches[0].pageX,t.touches[0].pageY)}),window.addEventListener("mouseup",t=>{this.hold=!1,n(this,p,E).call(this)}),window.addEventListener("touchend",t=>{this.hold=!1,n(this,p,E).call(this)}),window.addEventListener("mousemove",t=>{this.hold!=!1&&n(this,d,y).call(this,t.x,t.y)}),window.addEventListener("touchmove",t=>{this.hold!=!1&&n(this,d,y).call(this,t.touches[0].pageX,t.touches[0].pageY)})},d=new WeakSet,y=function(t,i){let h=i-this.joystick.offsetTop,e=i;if(h<0){h=0;let c=this.margin;e<c&&(e=c),this.joystick.style.top=`${e}px`}if(h>this.size){h=this.size;let c=innerHeight-this.margin;e>c&&(e=c),this.joystick.style.top=`${e-this.size}px`}this.stick.style.top=`${h/2}px`;let o=t-this.joystick.offsetLeft;o<0&&(o=0),o>this.size&&(o=this.size),this.stick.style.left=`${o/2}px`,this.y=h*2/this.size-1,this.x=o*2/this.size-1},p=new WeakSet,E=function(){this.stick.style.left=`${this.size/4}px`,this.stick.style.top=`${this.size/4}px`,this.x=0,this.y=0};const H=new T,V=Math.sqrt(2);class W{constructor(){this.canvas=document.querySelector("canvas"),this.w=this.canvas.width=innerWidth,this.h=this.canvas.height=innerHeight,this.ctx=this.canvas.getContext("2d")}}class F{constructor(){this.x=0,this.y=0,this.w=r.w,this.h=r.h}calc(){const t=K.x-r.w/2,i=f.w-r.w;this.x=t<0?0:t<i?t:i;const h=K.y-r.h/2,e=f.h-r.h;this.y=h<0?0:h<e?h:e}}var x,M;class Y{constructor(){a(this,x);this.w=Math.round(k(3,5))*15,this.h=Math.round(k(3,5))*15,this.color=j(),n(this,x,M).call(this)}draw(){r.ctx.beginPath(),r.ctx.rect(this.x-u.x,this.y-u.y,this.w,this.h),r.ctx.closePath(),r.ctx.fillStyle=this.color,r.ctx.fill()}}x=new WeakSet,M=function(){this.x=Math.round(k(-75,f.w)),this.y=Math.round(k(0,f.h-this.h));for(let t of C)if(B(this,t))return n(this,x,M).call(this)};class U{constructor(){this.w=!1,this.s=!1,this.a=!1,this.d=!1,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}keyDownHandler({code:t}){t==="KeyW"&&(this.w=!0),t==="KeyS"&&(this.s=!0),t==="KeyA"&&(this.a=!0),t==="KeyD"&&(this.d=!0)}keyUpHandler({code:t}){t==="KeyW"&&(this.w=!1),t==="KeyS"&&(this.s=!1),t==="KeyA"&&(this.a=!1),t==="KeyD"&&(this.d=!1)}}var z,N,L,q;class G{constructor(){a(this,z);a(this,L);this.w=this.h=15,this.x=20,this.y=20,this.color=j(),this.direction={x:0,y:0},this.speed=2}move(){const t=H.x,i=H.y,h=t&&i?this.speed/V:this.speed;this.x+=t*h;let e=n(this,z,N).call(this);for(let c of g){const l=P(this,c);l&&(t>0&&-l.left<e&&(e=-l.left),t<0&&l.right>e&&(e=l.right))}this.x+=e,this.y+=i*h;let o=n(this,L,q).call(this);for(let c of g){const l=P(this,c);l&&(i>0&&-l.top<o&&(o=-l.top),i<0&&l.bottom>o&&(o=l.bottom))}this.y+=o}draw(){this.move(),r.ctx.beginPath(),r.ctx.rect(this.x-u.x,this.y-u.y,this.w,this.h),r.ctx.closePath(),r.ctx.fillStyle=this.color,r.ctx.fill()}}z=new WeakSet,N=function(){const t=0-this.x;if(t>0)return t;const i=f.w-this.x-this.w;return i<0?i:0},L=new WeakSet,q=function(){const t=0-this.y;if(t>0)return t;const i=f.h-this.y-this.h;return i<0?i:0};class I{constructor(){this.w=2e3,this.h=2e3}}function P(s,t){const i=s.x+s.w-t.x,h=t.x+t.w-s.x,e=s.y+s.h-t.y,o=t.y+t.h-s.y;return i>0&&h>0&&e>0&&o>0?{left:i,right:h,top:e,bottom:o}:!1}function B(s,t){let i=s.x>=t.x+t.w||s.x+s.w<=t.x,h=s.y>=t.y+t.h||s.y+s.h<=t.y;return!(i||h)}function J(){let s=[];for(let t of C)B(t,u)&&s.push(t);return s}function k(s,t){return Math.random()*(t-s)+s}function j(s=80,t=50,i=1){return`hsla(${Math.round(Math.random()*4)*360/5},${s}%,${t}%,${i})`}function D(s=0){s>R+Q&&(R=s,r.ctx.clearRect(0,0,r.w,r.h),u.calc(),g=J(),K.draw(),g.map(t=>t.draw())),window.requestAnimationFrame(D)}const r=new W,f=new I,C=[];for(let s=0;s<500;s++)C.push(new Y);const K=new G,u=new F;new U;let g=[],R=0,Q=1e3/65,w=new Y;w.x=40;w.y=40;w.w=50;w.h=15;w.color=j();let m=new Y;m.x=90;m.y=41;m.w=15;m.h=15;m.color=j();D();
